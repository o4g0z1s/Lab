<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?Noto+Color+Emoji&family=Noto+Emoji&family=Noto+Kufi+Arabic&family=Noto+Music&family=Noto+Naskh+Arabic&family=Noto+Nastaliq+Urdu&family=Noto+Rashi+Hebrew&family=Noto+Sans&family=Noto+Sans+Adlam&family=Noto+Sans+Adlam+Unjoined&family=Noto+Sans+Anatolian+Hieroglyphs&family=Noto+Sans+Arabic&family=Noto+Sans+Armenian&family=Noto+Sans+Avestan&family=Noto+Sans+Balinese&family=Noto+Sans+Bamum&family=Noto+Sans+Bassa+Vah&family=Noto+Sans+Batak&family=Noto+Sans+Bengali&family=Noto+Sans+Bhaiksuki&family=Noto+Sans+Brahmi&family=Noto+Sans+Buginese&family=Noto+Sans+Buhid&family=Noto+Sans+Canadian+Aboriginal&family=Noto+Sans+Carian&family=Noto+Sans+Caucasian+Albanian&family=Noto+Sans+Chakma&family=Noto+Sans+Cham&family=Noto+Sans+Cherokee&family=Noto+Sans+Chorasmian&family=Noto+Sans+Coptic&family=Noto+Sans+Cuneiform&family=Noto+Sans+Cypriot&family=Noto+Sans+Cypro+Minoan&family=Noto+Sans+Deseret&family=Noto+Sans+Devanagari&family=Noto+Sans+Display&family=Noto+Sans+Duployan&family=Noto+Sans+Egyptian+Hieroglyphs&family=Noto+Sans+Elbasan&family=Noto+Sans+Elymaic&family=Noto+Sans+Ethiopic&family=Noto+Sans+Georgian&family=Noto+Sans+Glagolitic&family=Noto+Sans+Gothic&family=Noto+Sans+Grantha&family=Noto+Sans+Gujarati&family=Noto+Sans+Gunjala+Gondi&family=Noto+Sans+Gurmukhi&family=Noto+Sans+HK&family=Noto+Sans+Hanifi+Rohingya&family=Noto+Sans+Hanunoo&family=Noto+Sans+Hatran&family=Noto+Sans+Hebrew&family=Noto+Sans+Imperial+Aramaic&family=Noto+Sans+Indic+Siyaq+Numbers&family=Noto+Sans+Inscriptional+Pahlavi&family=Noto+Sans+Inscriptional+Parthian&family=Noto+Sans+JP&family=Noto+Sans+Javanese&family=Noto+Sans+KR&family=Noto+Sans+Kaithi&family=Noto+Sans+Kannada&family=Noto+Sans+Kawi&family=Noto+Sans+Kayah+Li&family=Noto+Sans+Kharoshthi&family=Noto+Sans+Khmer&family=Noto+Sans+Khojki&family=Noto+Sans+Khudawadi&family=Noto+Sans+Lao&family=Noto+Sans+Lao+Looped&family=Noto+Sans+Lepcha&family=Noto+Sans+Limbu&family=Noto+Sans+Linear+A&family=Noto+Sans+Linear+B&family=Noto+Sans+Lisu&family=Noto+Sans+Lycian&family=Noto+Sans+Lydian&family=Noto+Sans+Mahajani&family=Noto+Sans+Malayalam&family=Noto+Sans+Mandaic&family=Noto+Sans+Manichaean&family=Noto+Sans+Marchen&family=Noto+Sans+Masaram+Gondi&family=Noto+Sans+Math&family=Noto+Sans+Mayan+Numerals&family=Noto+Sans+Medefaidrin&family=Noto+Sans+Meetei+Mayek&family=Noto+Sans+Mende+Kikakui&family=Noto+Sans+Meroitic&family=Noto+Sans+Miao&family=Noto+Sans+Modi&family=Noto+Sans+Mongolian&family=Noto+Sans+Mono&family=Noto+Sans+Mro&family=Noto+Sans+Multani&family=Noto+Sans+Myanmar&family=Noto+Sans+NKo&family=Noto+Sans+NKo+Unjoined&family=Noto+Sans+Nabataean&family=Noto+Sans+Nag+Mundari&family=Noto+Sans+Nandinagari&family=Noto+Sans+New+Tai+Lue&family=Noto+Sans+Newa&family=Noto+Sans+Nushu&family=Noto+Sans+Ogham&family=Noto+Sans+Ol+Chiki&family=Noto+Sans+Old+Hungarian&family=Noto+Sans+Old+Italic&family=Noto+Sans+Old+North+Arabian&family=Noto+Sans+Old+Permic&family=Noto+Sans+Old+Persian&family=Noto+Sans+Old+Sogdian&family=Noto+Sans+Old+South+Arabian&family=Noto+Sans+Old+Turkic&family=Noto+Sans+Oriya&family=Noto+Sans+Osage&family=Noto+Sans+Osmanya&family=Noto+Sans+Pahawh+Hmong&family=Noto+Sans+Palmyrene&family=Noto+Sans+Pau+Cin+Hau&family=Noto+Sans+PhagsPa&family=Noto+Sans+Phoenician&family=Noto+Sans+Psalter+Pahlavi&family=Noto+Sans+Rejang&family=Noto+Sans+Runic&family=Noto+Sans+SC&family=Noto+Sans+Samaritan&family=Noto+Sans+Saurashtra&family=Noto+Sans+Sharada&family=Noto+Sans+Shavian&family=Noto+Sans+Siddham&family=Noto+Sans+SignWriting&family=Noto+Sans+Sinhala&family=Noto+Sans+Sogdian&family=Noto+Sans+Sora+Sompeng&family=Noto+Sans+Soyombo&family=Noto+Sans+Sundanese&family=Noto+Sans+Syloti+Nagri&family=Noto+Sans+Symbols&family=Noto+Sans+Symbols+2&family=Noto+Sans+Syriac&family=Noto+Sans+Syriac+Eastern&family=Noto+Sans+TC&family=Noto+Sans+Tagalog&family=Noto+Sans+Tagbanwa&family=Noto+Sans+Tai+Le&family=Noto+Sans+Tai+Tham&family=Noto+Sans+Tai+Viet&family=Noto+Sans+Takri&family=Noto+Sans+Tamil&family=Noto+Sans+Tamil+Supplement&family=Noto+Sans+Tangsa&family=Noto+Sans+Telugu&family=Noto+Sans+Thaana&family=Noto+Sans+Thai&family=Noto+Sans+Thai+Looped&family=Noto+Sans+Tifinagh&family=Noto+Sans+Tirhuta&family=Noto+Sans+Ugaritic&family=Noto+Sans+Vai&family=Noto+Sans+Vithkuqi&family=Noto+Sans+Wancho&family=Noto+Sans+Warang+Citi&family=Noto+Sans+Yi&family=Noto+Sans+Zanabazar+Square&family=Noto+Serif&family=Noto+Serif+Ahom&family=Noto+Serif+Armenian&family=Noto+Serif+Balinese&family=Noto+Serif+Bengali&family=Noto+Serif+Devanagari&family=Noto+Serif+Display&family=Noto+Serif+Dogra&family=Noto+Serif+Ethiopic&family=Noto+Serif+Georgian&family=Noto+Serif+Grantha&family=Noto+Serif+Gujarati&family=Noto+Serif+Gurmukhi&family=Noto+Serif+HK&family=Noto+Serif+Hebrew&family=Noto+Serif+Hentaigana&family=Noto+Serif+JP&family=Noto+Serif+KR&family=Noto+Serif+Kannada&family=Noto+Serif+Khitan+Small+Script&family=Noto+Serif+Khmer&family=Noto+Serif+Khojki&family=Noto+Serif+Lao&family=Noto+Serif+Makasar&family=Noto+Serif+Malayalam&family=Noto+Serif+Myanmar&family=Noto+Serif+NP+Hmong&family=Noto+Serif+Old+Uyghur&family=Noto+Serif+Oriya&family=Noto+Serif+Ottoman+Siyaq&family=Noto+Serif+SC&family=Noto+Serif+Sinhala&family=Noto+Serif+TC&family=Noto+Serif+Tamil&family=Noto+Serif+Tangut&family=Noto+Serif+Telugu&family=Noto+Serif+Thai&family=Noto+Serif+Tibetan&family=Noto+Serif+Todhri&family=Noto+Serif+Toto&family=Noto+Serif+Vithkuqi&family=Noto+Serif+Yezidi&family=Noto+Traditional+Nushu&family=Noto+Znamenny+Musical+Notation&display=swap" rel="stylesheet">
    <title>Uniboard</title>
    <style>
        body {
            font-family: Helvetica,"Noto Sans JP","Noto Color Emoji","Noto Kufi Arabic","Noto Music","Noto Naskh Arabic","Noto Nastaliq Urdu","Noto Rashi Hebrew","Noto Sans","Noto Sans Adlam","Noto Sans Adlam Unjoined","Noto Sans Anatolian Hieroglyphs","Noto Sans Arabic","Noto Sans Armenian","Noto Sans Avestan","Noto Sans Balinese","Noto Sans Bamum","Noto Sans Bassa Vah","Noto Sans Batak","Noto Sans Bengali","Noto Sans Bhaiksuki","Noto Sans Brahmi","Noto Sans Buginese","Noto Sans Buhid","Noto Sans Canadian Aboriginal","Noto Sans Carian","Noto Sans Caucasian Albanian","Noto Sans Chakma","Noto Sans Cham","Noto Sans Cherokee","Noto Sans Chorasmian","Noto Sans Coptic","Noto Sans Cuneiform","Noto Sans Cypriot","Noto Sans Cypro Minoan","Noto Sans Deseret","Noto Sans Devanagari","Noto Sans Display","Noto Sans Duployan","Noto Sans Egyptian Hieroglyphs","Noto Sans Elbasan","Noto Sans Elymaic","Noto Sans Ethiopic","Noto Sans Georgian","Noto Sans Glagolitic","Noto Sans Gothic","Noto Sans Grantha","Noto Sans Gujarati","Noto Sans Gunjala Gondi","Noto Sans Gurmukhi","Noto Sans HK","Noto Sans Hanifi Rohingya","Noto Sans Hanunoo","Noto Sans Hatran","Noto Sans Hebrew","Noto Sans Imperial Aramaic","Noto Sans Indic Siyaq Numbers","Noto Sans Inscriptional Pahlavi","Noto Sans Inscriptional Parthian","Noto Sans Javanese","Noto Sans KR","Noto Sans Kaithi","Noto Sans Kannada","Noto Sans Kawi","Noto Sans Kayah Li","Noto Sans Kharoshthi","Noto Sans Khmer","Noto Sans Khojki","Noto Sans Khudawadi","Noto Sans Lao","Noto Sans Lao Looped","Noto Sans Lepcha","Noto Sans Limbu","Noto Sans Linear A","Noto Sans Linear B","Noto Sans Lisu","Noto Sans Lycian","Noto Sans Lydian","Noto Sans Mahajani","Noto Sans Malayalam","Noto Sans Mandaic","Noto Sans Manichaean","Noto Sans Marchen","Noto Sans Masaram Gondi","Noto Sans Math","Noto Sans Mayan Numerals","Noto Sans Medefaidrin","Noto Sans Meetei Mayek","Noto Sans Mende Kikakui","Noto Sans Meroitic","Noto Sans Miao","Noto Sans Modi","Noto Sans Mongolian","Noto Sans Mono","Noto Sans Mro","Noto Sans Multani","Noto Sans Myanmar","Noto Sans NKo","Noto Sans NKo Unjoined","Noto Sans Nabataean","Noto Sans Nag Mundari","Noto Sans Nandinagari","Noto Sans New Tai Lue","Noto Sans Newa","Noto Sans Nushu","Noto Sans Ogham","Noto Sans Ol Chiki","Noto Sans Old Hungarian","Noto Sans Old Italic","Noto Sans Old North Arabian","Noto Sans Old Permic","Noto Sans Old Persian","Noto Sans Old Sogdian","Noto Sans Old South Arabian","Noto Sans Old Turkic","Noto Sans Oriya","Noto Sans Osage","Noto Sans Osmanya","Noto Sans Pahawh Hmong","Noto Sans Palmyrene","Noto Sans Pau Cin Hau","Noto Sans PhagsPa","Noto Sans Phoenician","Noto Sans Psalter Pahlavi","Noto Sans Rejang","Noto Sans Runic","Noto Sans SC","Noto Sans Samaritan","Noto Sans Saurashtra","Noto Sans Sharada","Noto Sans Shavian","Noto Sans Siddham","Noto Sans SignWriting","Noto Sans Sinhala","Noto Sans Sogdian","Noto Sans Sora Sompeng","Noto Sans Soyombo","Noto Sans Sundanese","Noto Sans Syloti Nagri","Noto Sans Symbols","Noto Sans Symbols 2","Noto Sans Syriac","Noto Sans Syriac Eastern","Noto Sans TC","Noto Sans Tagalog","Noto Sans Tagbanwa","Noto Sans Tai Le","Noto Sans Tai Tham","Noto Sans Tai Viet","Noto Sans Takri","Noto Sans Tamil","Noto Sans Tamil Supplement","Noto Sans Tangsa","Noto Sans Telugu","Noto Sans Thaana","Noto Sans Thai","Noto Sans Thai Looped","Noto Sans Tifinagh","Noto Sans Tirhuta","Noto Sans Ugaritic","Noto Sans Vai","Noto Sans Vithkuqi","Noto Sans Wancho","Noto Sans Warang Citi","Noto Sans Yi","Noto Sans Zanabazar Square","Noto Serif","Noto Serif Ahom","Noto Serif Armenian","Noto Serif Balinese","Noto Serif Bengali","Noto Serif Devanagari","Noto Serif Display","Noto Serif Dogra","Noto Serif Ethiopic","Noto Serif Georgian","Noto Serif Grantha","Noto Serif Gujarati","Noto Serif Gurmukhi","Noto Serif HK","Noto Serif Hebrew","Noto Serif Hentaigana","Noto Serif JP","Noto Serif KR","Noto Serif Kannada","Noto Serif Khitan Small Script","Noto Serif Khmer","Noto Serif Khojki","Noto Serif Lao","Noto Serif Makasar","Noto Serif Malayalam","Noto Serif Myanmar","Noto Serif NP Hmong","Noto Serif Old Uyghur","Noto Serif Oriya","Noto Serif Ottoman Siyaq","Noto Serif SC","Noto Serif Sinhala","Noto Serif TC","Noto Serif Tamil","Noto Serif Tangut","Noto Serif Telugu","Noto Serif Thai","Noto Serif Tibetan","Noto Serif Todhri","Noto Serif Toto","Noto Serif Vithkuqi","Noto Serif Yezidi","Noto Traditional Nushu","Noto Znamenny Musical Notation";
            background-color: #1e1e1e;
            color: #d4d4d4;
            margin: 0;
            /* padding-bottom for fixed search bar space, adjust if search bar height changes */
            padding-bottom: 70px;
            display: flex;
            flex-direction: column;
            height: 100dvh;
        }

        #sticky-header-content {
            position: sticky;
            top: 0;
            z-index: 10;
            background-color: #1e1e1e;
            padding: 10px;
            padding-bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #output-textbox {
            font-family: Helvetica,"Noto Sans JP","Noto Color Emoji","Noto Kufi Arabic","Noto Music","Noto Naskh Arabic","Noto Nastaliq Urdu","Noto Rashi Hebrew","Noto Sans","Noto Sans Adlam","Noto Sans Adlam Unjoined","Noto Sans Anatolian Hieroglyphs","Noto Sans Arabic","Noto Sans Armenian","Noto Sans Avestan","Noto Sans Balinese","Noto Sans Bamum","Noto Sans Bassa Vah","Noto Sans Batak","Noto Sans Bengali","Noto Sans Bhaiksuki","Noto Sans Brahmi","Noto Sans Buginese","Noto Sans Buhid","Noto Sans Canadian Aboriginal","Noto Sans Carian","Noto Sans Caucasian Albanian","Noto Sans Chakma","Noto Sans Cham","Noto Sans Cherokee","Noto Sans Chorasmian","Noto Sans Coptic","Noto Sans Cuneiform","Noto Sans Cypriot","Noto Sans Cypro Minoan","Noto Sans Deseret","Noto Sans Devanagari","Noto Sans Display","Noto Sans Duployan","Noto Sans Egyptian Hieroglyphs","Noto Sans Elbasan","Noto Sans Elymaic","Noto Sans Ethiopic","Noto Sans Georgian","Noto Sans Glagolitic","Noto Sans Gothic","Noto Sans Grantha","Noto Sans Gujarati","Noto Sans Gunjala Gondi","Noto Sans Gurmukhi","Noto Sans HK","Noto Sans Hanifi Rohingya","Noto Sans Hanunoo","Noto Sans Hatran","Noto Sans Hebrew","Noto Sans Imperial Aramaic","Noto Sans Indic Siyaq Numbers","Noto Sans Inscriptional Pahlavi","Noto Sans Inscriptional Parthian","Noto Sans Javanese","Noto Sans KR","Noto Sans Kaithi","Noto Sans Kannada","Noto Sans Kawi","Noto Sans Kayah Li","Noto Sans Kharoshthi","Noto Sans Khmer","Noto Sans Khojki","Noto Sans Khudawadi","Noto Sans Lao","Noto Sans Lao Looped","Noto Sans Lepcha","Noto Sans Limbu","Noto Sans Linear A","Noto Sans Linear B","Noto Sans Lisu","Noto Sans Lycian","Noto Sans Lydian","Noto Sans Mahajani","Noto Sans Malayalam","Noto Sans Mandaic","Noto Sans Manichaean","Noto Sans Marchen","Noto Sans Masaram Gondi","Noto Sans Math","Noto Sans Mayan Numerals","Noto Sans Medefaidrin","Noto Sans Meetei Mayek","Noto Sans Mende Kikakui","Noto Sans Meroitic","Noto Sans Miao","Noto Sans Modi","Noto Sans Mongolian","Noto Sans Mono","Noto Sans Mro","Noto Sans Multani","Noto Sans Myanmar","Noto Sans NKo","Noto Sans NKo Unjoined","Noto Sans Nabataean","Noto Sans Nag Mundari","Noto Sans Nandinagari","Noto Sans New Tai Lue","Noto Sans Newa","Noto Sans Nushu","Noto Sans Ogham","Noto Sans Ol Chiki","Noto Sans Old Hungarian","Noto Sans Old Italic","Noto Sans Old North Arabian","Noto Sans Old Permic","Noto Sans Old Persian","Noto Sans Old Sogdian","Noto Sans Old South Arabian","Noto Sans Old Turkic","Noto Sans Oriya","Noto Sans Osage","Noto Sans Osmanya","Noto Sans Pahawh Hmong","Noto Sans Palmyrene","Noto Sans Pau Cin Hau","Noto Sans PhagsPa","Noto Sans Phoenician","Noto Sans Psalter Pahlavi","Noto Sans Rejang","Noto Sans Runic","Noto Sans SC","Noto Sans Samaritan","Noto Sans Saurashtra","Noto Sans Sharada","Noto Sans Shavian","Noto Sans Siddham","Noto Sans SignWriting","Noto Sans Sinhala","Noto Sans Sogdian","Noto Sans Sora Sompeng","Noto Sans Soyombo","Noto Sans Sundanese","Noto Sans Syloti Nagri","Noto Sans Symbols","Noto Sans Symbols 2","Noto Sans Syriac","Noto Sans Syriac Eastern","Noto Sans TC","Noto Sans Tagalog","Noto Sans Tagbanwa","Noto Sans Tai Le","Noto Sans Tai Tham","Noto Sans Tai Viet","Noto Sans Takri","Noto Sans Tamil","Noto Sans Tamil Supplement","Noto Sans Tangsa","Noto Sans Telugu","Noto Sans Thaana","Noto Sans Thai","Noto Sans Thai Looped","Noto Sans Tifinagh","Noto Sans Tirhuta","Noto Sans Ugaritic","Noto Sans Vai","Noto Sans Vithkuqi","Noto Sans Wancho","Noto Sans Warang Citi","Noto Sans Yi","Noto Sans Zanabazar Square","Noto Serif","Noto Serif Ahom","Noto Serif Armenian","Noto Serif Balinese","Noto Serif Bengali","Noto Serif Devanagari","Noto Serif Display","Noto Serif Dogra","Noto Serif Ethiopic","Noto Serif Georgian","Noto Serif Grantha","Noto Serif Gujarati","Noto Serif Gurmukhi","Noto Serif HK","Noto Serif Hebrew","Noto Serif Hentaigana","Noto Serif JP","Noto Serif KR","Noto Serif Kannada","Noto Serif Khitan Small Script","Noto Serif Khmer","Noto Serif Khojki","Noto Serif Lao","Noto Serif Makasar","Noto Serif Malayalam","Noto Serif Myanmar","Noto Serif NP Hmong","Noto Serif Old Uyghur","Noto Serif Oriya","Noto Serif Ottoman Siyaq","Noto Serif SC","Noto Serif Sinhala","Noto Serif TC","Noto Serif Tamil","Noto Serif Tangut","Noto Serif Telugu","Noto Serif Thai","Noto Serif Tibetan","Noto Serif Todhri","Noto Serif Toto","Noto Serif Vithkuqi","Noto Serif Yezidi","Noto Traditional Nushu","Noto Znamenny Musical Notation";
            width: 95%;
            max-width: 800px;
            height: 100px;
            margin-bottom: 15px;
            padding: 10px;
            font-size: 1.2em;
            background-color: #2a2a2a;
            color: #d4d4d4;
            border: 1px solid #555;
            border-radius: 5px;
            resize: none;
        }

        #controls { /* Unicodeブロック選択のみのコンテナ */
            display: flex;
            align-items: center;
            gap: 10px;
            width: 95%;
            max-width: 800px;
            margin-bottom: 15px;
        }

        #controls label {
            font-size: 0.9em;
            flex-shrink: 0; /* ラベルが縮まないように */
        }

        #block-select {
            padding: 8px;
            background-color: #2a2a2a;
            color: #d4d4d4;
            border: 1px solid #555;
            border-radius: 5px;
            font-size: 0.9em;
            flex-grow: 1;
            min-width: 0; /* flexアイテムが縮小できるように */
        }

        #keyboard {
            display: grid;
            gap: 4px;
            padding: 5px;
            background-color: #252526;
            border: 1px solid #555;
            border-radius: 5px;
            width: 95%;
            max-width: 800px;
            box-sizing: border-box;
            margin-left: auto;
            margin-right: auto;
        }

        .key {
            background-color: #3e3e42;
            color: #d4d4d4;
            border: 1px solid #555;
            border-radius: 3px;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            user-select: none;
            font-size: 1.5em;
            min-height: 40px;
            min-width: 20px;
            overflow: hidden;
            text-align: center;
        }
        .key:hover {
            background-color: #5a5a5e;
        }
        .key:active {
            background-color: #094771;
        }
        .key.highlighted {
            border: 2px solid #ddd;
            box-shadow: 0 0 5px #aaa;
            background-color: #5a5a5e;
        }
        
        #keyboard {
            grid-template-columns: repeat(16, 1fr);
        }

        #info {
            width: 95%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            font-size: 0.8em;
            margin-top: 10px;
            margin-bottom: 10px; /* 検索バーとのスペース */
            color: #888;
        }

        #fixed-search-bar {
            position: fixed;
            bottom: 0;
            margin-left: auto;
            margin-right: auto;
            left: 0;
            right: 0;
            width: 100%;
            background-color: #1c1c1c; /* ヘッダーより少し暗く */
            padding: 8px 10px;
            box-sizing: border-box;
            border: 1px solid #444;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 20;
            max-width: 800px;
        }
        #search-input-bottom {
            flex-grow: 1;
            padding: 6px 8px;
            background-color: #2a2a2a;
            color: #d4d4d4;
            border: 1px solid #555;
            border-radius: 3px;
            font-size: 0.9em;
        }
        #search-button-bottom {
            padding: 6px 10px;
            background-color: #3e3e42;
            color: #d4d4d4;
            border: 1px solid #555;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.9em;
            flex-shrink: 0;
        }
        #search-button-bottom:hover { background-color: #5a5a5e; }
        #search-message-bottom {
            font-size: 0.8em;
            color: #aaa;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 200px; /* PCでの最大幅 */
            flex-shrink: 1; /* 必要に応じて縮小 */
        }


        /* スマホ: 横8列 */
        @media (max-width: 768px) {
            body {
                 padding-bottom: 100px; /* スマホでは検索バーが縦積みになるため多めに確保 */
            }
            #controls {
                flex-direction: column;
                align-items: stretch;
            }
            #controls label {
                margin-bottom: 5px;
            }
            #block-select {
                width: 100%;
            }

            #keyboard {
                grid-template-columns: repeat(8, 1fr);
            }
            .key {
                font-size: 1.3em;
                min-height: 35px;
            }
            #output-textbox {
                font-size: 1.1em;
            }
        }
    </style>
</head>
<body>

    <div id="sticky-header-content">
        <textarea id="output-textbox" placeholder=""></textarea>
        <div id="controls">
            <select id="block-select"></select>
        </div>
    </div>

    <div id="keyboard">
        <!-- キーボードはここにJavaScriptで生成されます -->
    </div>
    
    <div id="info">
        <span id="char-count"></span> / <span id="codepoint-range"></span>
    </div>

    <div id="fixed-search-bar">
        <input type="text" id="search-input-bottom" placeholder="">
        <button id="search-button-bottom">検索</button>
        <span id="search-message-bottom"></span>
    </div>

    <script>
        const unicodeBlocks = [
            { name: "基本ラテン文字 (Basic Latin)", start: 0x0000, end: 0x007F },
            { name: "ラテン1補助 (Latin-1 Supplement)", start: 0x0080, end: 0x00FF },
            { name: "ラテン文字拡張A (Latin Extended-A)", start: 0x0100, end: 0x017F },
            { name: "ラテン文字拡張B (Latin Extended-B)", start: 0x0180, end: 0x024F },
            { name: "IPA拡張 (IPA Extensions)", start: 0x0250, end: 0x02AF },
            { name: "前進を伴う修飾文字 (Spacing Modifier Letters)", start: 0x02B0, end: 0x02FF },
            { name: "合成可能なダイアクリティカルマーク (Combining Diacritical Marks)", start: 0x0300, end: 0x036F },
            { name: "ギリシア文字及びコプト文字 (Greek and Coptic)", start: 0x0370, end: 0x03FF },
            { name: "キリル文字 (Cyrillic)", start: 0x0400, end: 0x04FF },
            { name: "キリル文字補助 (Cyrillic Supplement)", start: 0x0500, end: 0x052F },
            { name: "アルメニア文字 (Armenian)", start: 0x0530, end: 0x058F },
            { name: "ヘブライ文字 (Hebrew)", start: 0x0590, end: 0x05FF },
            { name: "アラビア文字 (Arabic)", start: 0x0600, end: 0x06FF },
            { name: "シリア文字 (Syriac)", start: 0x0700, end: 0x074F },
            { name: "アラビア文字補助 (Arabic Supplement)", start: 0x0750, end: 0x077F },
            { name: "ターナ文字 (Thaana)", start: 0x0780, end: 0x07BF },
            { name: "ンコ文字 (NKo)", start: 0x07C0, end: 0x07FF },
            { name: "サマリア文字 (Samaritan)", start: 0x0800, end: 0x083F },
            { name: "マンダ文字 (Mandaic)", start: 0x0840, end: 0x085F },
            { name: "シリア文字拡張 (Syriac Supplement)", start: 0x0860, end: 0x086F },
            { name: "アラビア文字拡張B (Arabic Extended-B)", start: 0x0870, end: 0x089F },
            { name: "アラビア文字拡張A (Arabic Extended-A)", start: 0x08A0, end: 0x08FF },
            { name: "デーヴァナーガリー文字 (Devanagari)", start: 0x0900, end: 0x097F },
            { name: "ベンガル文字 (Bengali)", start: 0x0980, end: 0x09FF },
            { name: "グルムキー文字 (Gurmukhi)", start: 0x0A00, end: 0x0A7F },
            { name: "グジャラート文字 (Gujarati)", start: 0x0A80, end: 0x0AFF },
            { name: "オリヤー文字 (Oriya)", start: 0x0B00, end: 0x0B7F },
            { name: "タミル文字 (Tamil)", start: 0x0B80, end: 0x0BFF },
            { name: "テルグ文字 (Telugu)", start: 0x0C00, end: 0x0C7F },
            { name: "カンナダ文字 (Kannada)", start: 0x0C80, end: 0x0CFF },
            { name: "マラヤーラム文字 (Malayalam)", start: 0x0D00, end: 0x0D7F },
            { name: "シンハラ文字 (Sinhala)", start: 0x0D80, end: 0x0DFF },
            { name: "タイ文字 (Thai)", start: 0x0E00, end: 0x0E7F },
            { name: "ラオス文字 (Lao)", start: 0x0E80, end: 0x0EFF },
            { name: "チベット文字 (Tibetan)", start: 0x0F00, end: 0x0FFF },
            { name: "ビルマ文字 (Myanmar)", start: 0x1000, end: 0x109F },
            { name: "グルジア文字 (Georgian)", start: 0x10A0, end: 0x10FF },
            { name: "ハングル字母 (Hangul Jamo)", start: 0x1100, end: 0x11FF },
            { name: "エチオピア文字 (Ethiopic)", start: 0x1200, end: 0x137F },
            { name: "エチオピア文字補助 (Ethiopic Supplement)", start: 0x1380, end: 0x139F },
            { name: "チェロキー文字 (Cherokee)", start: 0x13A0, end: 0x13FF },
            { name: "統合カナダ先住民音節 (Unified Canadian Aboriginal Syllabics)", start: 0x1400, end: 0x167F },
            { name: "オガム文字 (Ogham)", start: 0x1680, end: 0x169F },
            { name: "ルーン文字 (Runic)", start: 0x16A0, end: 0x16FF },
            { name: "タガログ文字 (Tagalog)", start: 0x1700, end: 0x171F },
            { name: "ハヌノオ文字 (Hanunoo)", start: 0x1720, end: 0x173F },
            { name: "ブヒッド文字 (Buhid)", start: 0x1740, end: 0x175F },
            { name: "タグバヌア文字 (Tagbanwa)", start: 0x1760, end: 0x177F },
            { name: "クメール文字 (Khmer)", start: 0x1780, end: 0x17FF },
            { name: "モンゴル文字 (Mongolian)", start: 0x1800, end: 0x18AF },
            { name: "統合カナダ先住民文字拡張 (Unified Canadian Aboriginal Syllabics Extended)", start: 0x18B0, end: 0x18FF },
            { name: "リンブ文字 (Limbu)", start: 0x1900, end: 0x194F },
            { name: "タイ・ナ文字 (Tai Le)", start: 0x1950, end: 0x197F },
            { name: "新タイ・ロ文字 (New Tai Lue)", start: 0x1980, end: 0x19DF },
            { name: "クメール文字用記号 (Khmer Symbols)", start: 0x19E0, end: 0x19FF },
            { name: "ブギス文字 (Buginese)", start: 0x1A00, end: 0x1A1F },
            { name: "タイ・タム文字 (Tai Tham)", start: 0x1A20, end: 0x1AAF },
            { name: "合成可能なダイアクリティカルマーク拡張 (Combining Diacritical Marks Extended)", start: 0x1AB0, end: 0x1AFF },
            { name: "バリ文字 (Balinese)", start: 0x1B00, end: 0x1B7F },
            { name: "スンダ文字 (Sundanese)", start: 0x1B80, end: 0x1BBF },
            { name: "バタク文字 (Batak)", start: 0x1BC0, end: 0x1BFF },
            { name: "レプチャ文字 (Lepcha)", start: 0x1C00, end: 0x1C4F },
            { name: "オル・チキ文字 (Ol Chiki)", start: 0x1C50, end: 0x1C7F },
            { name: "キリル文字拡張C (Cyrillic Extended-C)", start: 0x1C80, end: 0x1C8F },
            { name: "グルジア文字拡張 (Georgian Extended)", start: 0x1C90, end: 0x1CBF },
            { name: "スンダ文字補助 (Sundanese Supplement)", start: 0x1CC0, end: 0x1CCF },
            { name: "ヴェーダ用拡張 (Vedic Extensions)", start: 0x1CD0, end: 0x1CFF },
            { name: "音声記号拡張 (Phonetic Extensions)", start: 0x1D00, end: 0x1D7F },
            { name: "音声記号拡張補助 (Phonetic Extensions Supplement)", start: 0x1D80, end: 0x1DBF },
            { name: "合成可能なダイアクリティカルマーク補助 (Combining Diacritical Marks Supplement)", start: 0x1DC0, end: 0x1DFF },
            { name: "ラテン文字拡張追加 (Latin Extended Additional)", start: 0x1E00, end: 0x1EFF },
            { name: "ギリシア文字拡張 (Greek Extended)", start: 0x1F00, end: 0x1FFF },
            { name: "一般句読点 (General Punctuation)", start: 0x2000, end: 0x206F },
            { name: "上付き・下付き (Superscripts and Subscripts)", start: 0x2070, end: 0x209F },
            { name: "通貨記号 (Currency Symbols)", start: 0x20A0, end: 0x20CF },
            { name: "合成可能な記号用ダイアクリティカルマーク (Combining Diacritical Marks for Symbols)", start: 0x20D0, end: 0x20FF },
            { name: "文字様記号 (Letterlike Symbols)", start: 0x2100, end: 0x214F },
            { name: "数字に準ずるもの (Number Forms)", start: 0x2150, end: 0x218F },
            { name: "矢印 (Arrows)", start: 0x2190, end: 0x21FF },
            { name: "数学記号 (Mathematical Operators)", start: 0x2200, end: 0x22FF },
            { name: "その他の技術用記号 (Miscellaneous Technical)", start: 0x2300, end: 0x23FF },
            { name: "制御機能用記号 (Control Pictures)", start: 0x2400, end: 0x243F },
            { name: "光学的文字認識 (Optical Character Recognition)", start: 0x2440, end: 0x245F },
            { name: "囲み英数字 (Enclosed Alphanumerics)", start: 0x2460, end: 0x24FF },
            { name: "罫線素片 (Box Drawing)", start: 0x2500, end: 0x257F },
            { name: "ブロック要素 (Block Elements)", start: 0x2580, end: 0x259F },
            { name: "幾何学模様 (Geometric Shapes)", start: 0x25A0, end: 0x25FF },
            { name: "その他の記号 (Miscellaneous Symbols)", start: 0x2600, end: 0x26FF },
            { name: "装飾記号 (Dingbats)", start: 0x2700, end: 0x27BF },
            { name: "その他の数学記号A (Miscellaneous Mathematical Symbols-A)", start: 0x27C0, end: 0x27EF },
            { name: "補助矢印A (Supplemental Arrows-A)", start: 0x27F0, end: 0x27FF },
            { name: "点字図形 (Braille Patterns)", start: 0x2800, end: 0x28FF },
            { name: "補助矢印B (Supplemental Arrows-B)", start: 0x2900, end: 0x297F },
            { name: "その他の数学記号B (Miscellaneous Mathematical Symbols-B)", start: 0x2980, end: 0x29FF },
            { name: "補助数学記号 (Supplemental Mathematical Operators)", start: 0x2A00, end: 0x2AFF },
            { name: "その他の記号及び矢印 (Miscellaneous Symbols and Arrows)", start: 0x2B00, end: 0x2BFF },
            { name: "グラゴル文字 (Glagolitic)", start: 0x2C00, end: 0x2C5F },
            { name: "ラテン文字拡張C (Latin Extended-C)", start: 0x2C60, end: 0x2C7F },
            { name: "コプト文字 (Coptic)", start: 0x2C80, end: 0x2CFF },
            { name: "グルジア文字補助 (Georgian Supplement)", start: 0x2D00, end: 0x2D2F },
            { name: "ティフィナグ文字 (Tifinagh)", start: 0x2D30, end: 0x2D7F },
            { name: "エチオピア文字拡張 (Ethiopic Extended)", start: 0x2D80, end: 0x2DDF },
            { name: "キリル文字拡張A (Cyrillic Extended-A)", start: 0x2DE0, end: 0x2DFF },
            { name: "補助句読点 (Supplemental Punctuation)", start: 0x2E00, end: 0x2E7F },
            { name: "CJK部首補助 (CJK Radicals Supplement)", start: 0x2E80, end: 0x2EFF },
            { name: "康煕部首 (Kangxi Radicals)", start: 0x2F00, end: 0x2FDF },
            { name: "漢字構成記述文字 (Ideographic Description Characters)", start: 0x2FF0, end: 0x2FFF },
            { name: "CJKの記号及び句読点 (CJK Symbols and Punctuation)", start: 0x3000, end: 0x303F },
            { name: "平仮名 (Hiragana)", start: 0x3040, end: 0x309F },
            { name: "片仮名 (Katakana)", start: 0x30A0, end: 0x30FF },
            { name: "注音字母 (Bopomofo)", start: 0x3100, end: 0x312F },
            { name: "ハングル互換字母 (Hangul Compatibility Jamo)", start: 0x3130, end: 0x318F },
            { name: "漢文用記号 (Kanbun)", start: 0x3190, end: 0x319F },
            { name: "注音字母拡張 (Bopomofo Extended)", start: 0x31A0, end: 0x31BF },
            { name: "CJKの筆画 (CJK Strokes)", start: 0x31C0, end: 0x31EF },
            { name: "片仮名拡張 (Katakana Phonetic Extensions)", start: 0x31F0, end: 0x31FF },
            { name: "囲みCJK文字・月 (Enclosed CJK Letters and Months)", start: 0x3200, end: 0x32FF },
            { name: "CJK互換用文字 (CJK Compatibility)", start: 0x3300, end: 0x33FF },
            { name: "CJK統合漢字拡張A (CJK Unified Ideographs Extension A)", start: 0x3400, end: 0x4DBF },
            { name: "易経記号 (Yijing Hexagram Symbols)", start: 0x4DC0, end: 0x4DFF },
            { name: "CJK統合漢字 (CJK Unified Ideographs)", start: 0x4E00, end: 0x9FFF },
            { name: "イ文字 (Yi Syllables)", start: 0xA000, end: 0xA48F },
            { name: "イ文字部首 (Yi Radicals)", start: 0xA490, end: 0xA4CF },
            { name: "リス文字 (Lisu)", start: 0xA4D0, end: 0xA4FF },
            { name: "ヴァイ文字 (Vai)", start: 0xA500, end: 0xA63F },
            { name: "キリル文字拡張B (Cyrillic Extended-B)", start: 0xA640, end: 0xA69F },
            { name: "バムン文字 (Bamum)", start: 0xA6A0, end: 0xA6FF },
            { name: "声調修飾文字 (Modifier Tone Letters)", start: 0xA700, end: 0xA71F },
            { name: "ラテン文字拡張D (Latin Extended-D)", start: 0xA720, end: 0xA7FF },
            { name: "シロティ・ナグリ文字 (Syloti Nagri)", start: 0xA800, end: 0xA82F },
            { name: "インド慣用数量記号 (Common Indic Number Forms)", start: 0xA830, end: 0xA83F },
            { name: "パスパ文字 (Phags-pa)", start: 0xA840, end: 0xA87F },
            { name: "サウラーシュトラ文字 (Saurashtra)", start: 0xA880, end: 0xA8DF },
            { name: "デーヴァナーガリー文字拡張 (Devanagari Extended)", start: 0xA8E0, end: 0xA8FF },
            { name: "カヤー文字 (Kayah Li)", start: 0xA900, end: 0xA92F },
            { name: "ルジャン文字 (Rejang)", start: 0xA930, end: 0xA95F },
            { name: "ハングル字母拡張A (Hangul Jamo Extended-A)", start: 0xA960, end: 0xA97F },
            { name: "ジャワ文字 (Javanese)", start: 0xA980, end: 0xA9DF },
            { name: "ビルマ文字拡張B (Myanmar Extended-B)", start: 0xA9E0, end: 0xA9FF },
            { name: "チャム文字 (Cham)", start: 0xAA00, end: 0xAA5F },
            { name: "ビルマ文字拡張A (Myanmar Extended-A)", start: 0xAA60, end: 0xAA7F },
            { name: "タイ・ヴィエト文字 (Tai Viet)", start: 0xAA80, end: 0xAADF },
            { name: "メイテイ文字拡張 (Meetei Mayek Extensions)", start: 0xAAE0, end: 0xAAFF },
            { name: "エチオピア文字拡張A (Ethiopic Extended-A)", start: 0xAB00, end: 0xAB2F },
            { name: "ラテン文字拡張E (Latin Extended-E)", start: 0xAB30, end: 0xAB6F },
            { name: "チェロキー文字補助 (Cherokee Supplement)", start: 0xAB70, end: 0xABBF },
            { name: "メイテイ文字 (Meetei Mayek)", start: 0xABC0, end: 0xABFF },
            { name: "ハングル音節文字 (Hangul Syllables)", start: 0xAC00, end: 0xD7AF },
            { name: "ハングル字母拡張B (Hangul Jamo Extended-B)", start: 0xD7B0, end: 0xD7FF },
            { name: "私用領域 (Private Use Area)", start: 0xE000, end: 0xF8FF },
            { name: "CJK互換漢字 (CJK Compatibility Ideographs)", start: 0xF900, end: 0xFAFF },
            { name: "アルファベット表示形 (Alphabetic Presentation Forms)", start: 0xFB00, end: 0xFB4F },
            { name: "アラビア表示形A (Arabic Presentation Forms-A)", start: 0xFB50, end: 0xFDFF },
            { name: "字形選択子 (Variation Selectors)", start: 0xFE00, end: 0xFE0F },
            { name: "縦書き形 (Vertical Forms)", start: 0xFE10, end: 0xFE1F },
            { name: "合成可能な半記号 (Combining Half Marks)", start: 0xFE20, end: 0xFE2F },
            { name: "CJK互換形 (CJK Compatibility Forms)", start: 0xFE30, end: 0xFE4F },
            { name: "小字形 (Small Form Variants)", start: 0xFE50, end: 0xFE6F },
            { name: "アラビア表示形B (Arabic Presentation Forms-B)", start: 0xFE70, end: 0xFEFF },
            { name: "半角・全角形 (Halfwidth and Fullwidth Forms)", start: 0xFF00, end: 0xFFEF },
            { name: "特殊用途文字 (Specials)", start: 0xFFF0, end: 0xFFFF },
            { name: "線文字B音節文字 (Linear B Syllabary)", start: 0x10000, end: 0x1007F },
            { name: "線文字B表意文字 (Linear B Ideograms)", start: 0x10080, end: 0x100FF },
            { name: "エーゲ数字 (Aegean Numbers)", start: 0x10100, end: 0x1013F },
            { name: "古代ギリシア数字 (Ancient Greek Numbers)", start: 0x10140, end: 0x1018F },
            { name: "古代記号 (Ancient Symbols)", start: 0x10190, end: 0x101CF },
            { name: "ファイストスの円盤文字 (Phaistos Disc)", start: 0x101D0, end: 0x101FF },
            { name: "リュキア文字 (Lycian)", start: 0x10280, end: 0x1029F },
            { name: "カリア文字 (Carian)", start: 0x102A0, end: 0x102DF },
            { name: "コプト・エパクト数字 (Coptic Epact Numbers)", start: 0x102E0, end: 0x102FF },
            { name: "古代イタリア文字 (Old Italic)", start: 0x10300, end: 0x1032F },
            { name: "ゴート文字 (Gothic)", start: 0x10330, end: 0x1034F },
            { name: "古ペルム文字 (Old Permic)", start: 0x10350, end: 0x1037F },
            { name: "ウガリト文字 (Ugaritic)", start: 0x10380, end: 0x1039F },
            { name: "古代ペルシャ文字 (Old Persian)", start: 0x103A0, end: 0x103DF },
            { name: "デザレット文字 (Deseret)", start: 0x10400, end: 0x1044F },
            { name: "ショー文字 (Shavian)", start: 0x10450, end: 0x1047F },
            { name: "オスマニア文字 (Osmanya)", start: 0x10480, end: 0x104AF },
            { name: "オセージ文字 (Osage)", start: 0x104B0, end: 0x104FF },
            { name: "エルバサン文字 (Elbasan)", start: 0x10500, end: 0x1052F },
            { name: "カフカス・アルバニア文字 (Caucasian Albanian)", start: 0x10530, end: 0x1056F },
            { name: "ビタクチェ文字 (Vithkuqi)", start: 0x10570, end: 0x105BF },
            { name: "線文字A (Linear A)", start: 0x10600, end: 0x1077F },
            { name: "ラテン文字拡張F (Latin Extended-F)", start: 0x10780, end: 0x107BF },
            { name: "キプロス音節文字 (Cypriot Syllabary)", start: 0x10800, end: 0x1083F },
            { name: "帝国アラム文字 (Imperial Aramaic)", start: 0x10840, end: 0x1085F },
            { name: "パルミラ文字 (Palmyrene)", start: 0x10860, end: 0x1087F },
            { name: "ナバテア文字 (Nabataean)", start: 0x10880, end: 0x108AF },
            { name: "ハトラ文字 (Hatran)", start: 0x108E0, end: 0x108FF },
            { name: "フェニキア文字 (Phoenician)", start: 0x10900, end: 0x1091F },
            { name: "リュディア文字 (Lydian)", start: 0x10920, end: 0x1093F },
            { name: "メロエ文字楷書体 (Meroitic Hieroglyphs)", start: 0x10980, end: 0x1099F },
            { name: "メロエ文字草書体 (Meroitic Cursive)", start: 0x109A0, end: 0x109FF },
            { name: "カローシュティー文字 (Kharoshthi)", start: 0x10A00, end: 0x10A5F },
            { name: "古代南アラビア文字 (Old South Arabian)", start: 0x10A60, end: 0x10A7F },
            { name: "古代北アラビア文字 (Old North Arabian)", start: 0x10A80, end: 0x10A9F },
            { name: "マニ文字 (Manichaean)", start: 0x10AC0, end: 0x10AFF },
            { name: "アヴェスタ文字 (Avestan)", start: 0x10B00, end: 0x10B3F },
            { name: "碑文パルティア文字 (Inscriptional Parthian)", start: 0x10B40, end: 0x10B5F },
            { name: "碑文パフラヴィ文字 (Inscriptional Pahlavi)", start: 0x10B60, end: 0x10B7F },
            { name: "詩編パフラヴィ文字 (Psalter Pahlavi)", start: 0x10B80, end: 0x10BAF },
            { name: "突厥文字 (Old Turkic)", start: 0x10C00, end: 0x10C4F },
            { name: "古ハンガリー文字 (Old Hungarian)", start: 0x10C80, end: 0x10CFF },
            { name: "ハニーフィー・ロヒンギャ文字 (Hanifi Rohingya)", start: 0x10D00, end: 0x10D3F },
            { name: "ルミ数字記号 (Rumi Numeral Symbols)", start: 0x10E60, end: 0x10E7F },
            { name: "ヤズィーディー文字 (Yezidi)", start: 0x10E80, end: 0x10EBF },
            { name: "アラビア文字拡張C (Arabic Extended-C)", start: 0x10EC0, end: 0x10EFF },
            { name: "古ソグド文字 (Old Sogdian)", start: 0x10F00, end: 0x10F2F },
            { name: "ソグド文字 (Sogdian)", start: 0x10F30, end: 0x10F6F },
            { name: "古ウイグル文字 (Old Uyghur)", start: 0x10F70, end: 0x10FAF },
            { name: "ホラズム文字 (Chorasmian)", start: 0x10FB0, end: 0x10FDF },
            { name: "エリマイス文字 (Elymaic)", start: 0x10FE0, end: 0x10FFF },
            { name: "ブラーフミー文字 (Brahmi)", start: 0x11000, end: 0x1107F },
            { name: "カイティー文字 (Kaithi)", start: 0x11080, end: 0x110CF },
            { name: "ソラングソンペング文字 (Sora Sompeng)", start: 0x110D0, end: 0x110FF },
            { name: "チャクマ文字 (Chakma)", start: 0x11100, end: 0x1114F },
            { name: "マハージャニー文字 (Mahajani)", start: 0x11150, end: 0x1117F },
            { name: "シャーラダー文字 (Sharada)", start: 0x11180, end: 0x111DF },
            { name: "旧シンハラ数字 (Sinhala Archaic Numbers)", start: 0x111E0, end: 0x111FF },
            { name: "ホジャ文字 (Khojki)", start: 0x11200, end: 0x1124F },
            { name: "ムルターニー文字 (Multani)", start: 0x11280, end: 0x112AF },
            { name: "フダーワーディー文字 (Khudawadi)", start: 0x112B0, end: 0x112FF },
            { name: "グランタ文字 (Grantha)", start: 0x11300, end: 0x1137F },
            { name: "ネワ文字 (Newa)", start: 0x11400, end: 0x1147F },
            { name: "ティルフータ文字 (Tirhuta)", start: 0x11480, end: 0x114DF },
            { name: "悉曇文字 (Siddham)", start: 0x11580, end: 0x115FF },
            { name: "モーディー文字 (Modi)", start: 0x11600, end: 0x1165F },
            { name: "モンゴル文字補助 (Mongolian Supplement)", start: 0x11660, end: 0x1167F },
            { name: "タークリー文字 (Takri)", start: 0x11680, end: 0x116CF },
            { name: "アーホム文字 (Ahom)", start: 0x11700, end: 0x1174F },
            { name: "ドーグリー文字 (Dogra)", start: 0x11800, end: 0x1184F },
            { name: "ワラング・クシティ文字 (Warang Citi)", start: 0x118A0, end: 0x118FF },
            { name: "ディヴェス・アクル文字 (Dives Akuru)", start: 0x11900, end: 0x1195F },
            { name: "ナンディナーガリー文字 (Nandinagari)", start: 0x119A0, end: 0x119FF },
            { name: "ザナバザル方形文字 (Zanabazar Square)", start: 0x11A00, end: 0x11A4F },
            { name: "ソヨンボ文字 (Soyombo)", start: 0x11A50, end: 0x11AAF },
            { name: "統合カナダ先住民音節拡張A (Unified Canadian Aboriginal Syllabics Extended-A)", start: 0x11AB0, end: 0x11ABF },
            { name: "パウ・チン・ハウ文字 (Pau Cin Hau)", start: 0x11AC0, end: 0x11AFF },
            { name: "バイクシュキー文字 (Bhaiksuki)", start: 0x11C00, end: 0x11C6F },
            { name: "マルチェン文字 (Marchen)", start: 0x11C70, end: 0x11CBF },
            { name: "マサラム・ゴーンディー文字 (Masaram Gondi)", start: 0x11D00, end: 0x11D5F },
            { name: "グンジャラ・ゴーンディー文字 (Gunjala Gondi)", start: 0x11D60, end: 0x11DAF },
            { name: "マカッサル文字 (Makasar)", start: 0x11EE0, end: 0x11EFF },
            { name: "カウィ文字 (Kawi)", start: 0x11F00, end: 0x11F5F },
            { name: "リス文字補助 (Lisu Supplement)", start: 0x11FB0, end: 0x11FBF },
            { name: "タミル文字補助 (Tamil Supplement)", start: 0x11FC0, end: 0x11FFF },
            { name: "楔形文字 (Cuneiform)", start: 0x12000, end: 0x123FF },
            { name: "楔形文字の数字及び句読点 (Cuneiform Numbers and Punctuation)", start: 0x12400, end: 0x1247F },
            { name: "シュメール楔形文字 (Early Dynastic Cuneiform)", start: 0x12480, end: 0x1254F },
            { name: "キュプロ・ミノア文字 (Cypro-Minoan)", start: 0x12F90, end: 0x12FFF },
            { name: "エジプト聖刻文字 (Egyptian Hieroglyphs)", start: 0x13000, end: 0x1342F },
            { name: "エジプト聖刻文字書式制御記号 (Egyptian Hieroglyph Format Controls)", start: 0x13430, end: 0x1343F },
            { name: "アナトリア聖刻文字 (Anatolian Hieroglyphs)", start: 0x14400, end: 0x1467F },
            { name: "バムン文字補助 (Bamum Supplement)", start: 0x16800, end: 0x16A3F },
            { name: "ムロ文字 (Mro)", start: 0x16A40, end: 0x16A6F },
            { name: "バサ文字 (Bassa Vah)", start: 0x16AD0, end: 0x16AFF },
            { name: "パハウ・フモン文字 (Pahawh Hmong)", start: 0x16B00, end: 0x16B8F },
            { name: "メデファイドリン文字 (Medefaidrin)", start: 0x16E40, end: 0x16E9F },
            { name: "ミャオ文字 (Miao)", start: 0x16F00, end: 0x16F9F },
            { name: "漢字の記号及び句読点 (Ideographic Symbols and Punctuation)", start: 0x16FE0, end: 0x16FFF },
            { name: "西夏文字 (Tangut)", start: 0x17000, end: 0x187FF },
            { name: "西夏文字の構成要素 (Tangut Components)", start: 0x18800, end: 0x18AFF },
            { name: "契丹小字 (Khitan Small Script)", start: 0x18B00, end: 0x18CFF },
            { name: "西夏文字補助 (Tangut Supplement)", start: 0x18D00, end: 0x18D7F },
            { name: "仮名拡張B (Kana Extended-B)", start: 0x1AFF0, end: 0x1AFFF },
            { name: "仮名補助 (Kana Supplement)", start: 0x1B000, end: 0x1B0FF },
            { name: "仮名拡張A (Kana Extended-A)", start: 0x1B100, end: 0x1B12F },
            { name: "小書き仮名拡張 (Small Kana Extension)", start: 0x1B130, end: 0x1B16F },
            { name: "女書 (Nushu)", start: 0x1B170, end: 0x1B2FF },
            { name: "デュプロワイエ式速記 (Duployan)", start: 0x1BC00, end: 0x1BC9F },
            { name: "速記書式制御記号 (Shorthand Format Controls)", start: 0x1BCA0, end: 0x1BCAF },
            { name: "ズナメニ聖歌音符 (Znamenny Musical Notation)", start: 0x1CF00, end: 0x1CFCF },
            { name: "ビザンチン音楽記号 (Byzantine Musical Symbols)", start: 0x1D000, end: 0x1D0FF },
            { name: "音楽記号 (Musical Symbols)", start: 0x1D100, end: 0x1D1FF },
            { name: "古代ギリシア音符記号 (Ancient Greek Musical Notation)", start: 0x1D200, end: 0x1D24F },
            { name: "カクトヴィク数字 (Kaktovik Numerals)", start: 0x1D2C0, end: 0x1D2DF },
            { name: "マヤ数字 (Mayan Numerals)", start: 0x1D2E0, end: 0x1D2FF },
            { name: "太玄経記号 (Tai Xuan Jing Symbols)", start: 0x1D300, end: 0x1D35F },
            { name: "算木用数字 (Counting Rod Numerals)", start: 0x1D360, end: 0x1D37F },
            { name: "数学用英数字記号 (Mathematical Alphanumeric Symbols)", start: 0x1D400, end: 0x1D7FF },
            { name: "サットン手話表記法 (Sutton SignWriting)", start: 0x1D800, end: 0x1DAAF },
            { name: "ラテン文字拡張G (Latin Extended-G)", start: 0x1DF00, end: 0x1DFFF },
            { name: "グラゴル文字補助 (Glagolitic Supplement)", start: 0x1E000, end: 0x1E02F },
            { name: "キリル文字拡張D (Cyrillic Extended-D)", start: 0x1E030, end: 0x1E08F },
            { name: "Nyiakeng Puachue Hmong文字 (Nyiakeng Puachue Hmong)", start: 0x1E100, end: 0x1E14F },
            { name: "トト (Toto)", start: 0x1E290, end: 0x1E2BF },
            { name: "ワンチョ文字 (Wancho)", start: 0x1E2C0, end: 0x1E2FF },
            { name: "ムンダリ・バニ文字 (Nag Mundari)", start: 0x1E4D0, end: 0x1E4FF },
            { name: "エチオピア文字拡張B (Ethiopic Extended-B)", start: 0x1E7E0, end: 0x1E7FF },
            { name: "メンデ文字 (Mende Kikakui)", start: 0x1E800, end: 0x1E8DF },
            { name: "アドラム文字 (Adlam)", start: 0x1E900, end: 0x1E95F },
            { name: "インド・シヤク数字 (Indic Siyaq Numbers)", start: 0x1EC70, end: 0x1ECBF },
            { name: "オスマン・シヤク数字 (Ottoman Siyaq Numbers)", start: 0x1ED00, end: 0x1ED4F },
            { name: "アラビア数字記号 (Arabic Mathematical Alphabetic Symbols)", start: 0x1EE00, end: 0x1EEFF },
            { name: "マージャン記号 (Mahjong Tiles)", start: 0x1F000, end: 0x1F02F },
            { name: "ドミノ記号 (Domino Tiles)", start: 0x1F030, end: 0x1F09F },
            { name: "トランプ記号 (Playing Cards)", start: 0x1F0A0, end: 0x1F0FF },
            { name: "囲み英数字補助 (Enclosed Alphanumeric Supplement)", start: 0x1F100, end: 0x1F1FF },
            { name: "囲み漢字補助 (Enclosed Ideographic Supplement)", start: 0x1F200, end: 0x1F2FF },
            { name: "その他の記号及び絵記号 (Miscellaneous Symbols and Pictographs)", start: 0x1F300, end: 0x1F5FF },
            { name: "顔文字 (Emoticons)", start: 0x1F600, end: 0x1F64F },
            { name: "装飾用絵記号 (Ornamental Dingbats)", start: 0x1F650, end: 0x1F67F },
            { name: "交通及び地図記号 (Transport and Map Symbols)", start: 0x1F680, end: 0x1F6FF },
            { name: "錬金術記号 (Alchemical Symbols)", start: 0x1F700, end: 0x1F77F },
            { name: "幾何学模様拡張 (Geometric Shapes Extended)", start: 0x1F780, end: 0x1F7FF },
            { name: "補助矢印C (Supplemental Arrows-C)", start: 0x1F800, end: 0x1F8FF },
            { name: "補助記号及び絵記号 (Supplemental Symbols and Pictographs)", start: 0x1F900, end: 0x1F9FF },
            { name: "チェス記号 (Chess Symbols)", start: 0x1FA00, end: 0x1FA6F },
            { name: "記号及び絵記号拡張A (Symbols and Pictographs Extended-A)", start: 0x1FA70, end: 0x1FAFF },
            { name: "旧型コンピュータ記号 (Symbols for Legacy Computing)", start: 0x1FB00, end: 0x1FBFF },
            { name: "CJK統合漢字拡張B (CJK Unified Ideographs Extension B)", start: 0x20000, end: 0x2A6DF },
            { name: "CJK統合漢字拡張C (CJK Unified Ideographs Extension C)", start: 0x2A700, end: 0x2B73F },
            { name: "CJK統合漢字拡張D (CJK Unified Ideographs Extension D)", start: 0x2B740, end: 0x2B81F },
            { name: "CJK統合漢字拡張E (CJK Unified Ideographs Extension E)", start: 0x2B820, end: 0x2CEAF },
            { name: "CJK統合漢字拡張F (CJK Unified Ideographs Extension F)", start: 0x2CEB0, end: 0x2EBEF },
            { name: "CJK統合漢字拡張I (CJK Unified Ideographs Extension I)", start: 0x2EBF0, end: 0x2EE5F },
            { name: "CJK互換漢字補助 (CJK Compatibility Ideographs Supplement)", start: 0x2F800, end: 0x2FA1F },
            { name: "CJK統合漢字拡張G (CJK Unified Ideographs Extension G)", start: 0x30000, end: 0x3134F },
            { name: "CJK統合漢字拡張H (CJK Unified Ideographs Extension H)", start: 0x31350, end: 0x323AF },
            { name: "タグ (Tags)", start: 0xE0000, end: 0xE007F },
            { name: "字形選択子補助 (Variation Selectors Supplement)", start: 0xE0100, end: 0xE01EF },
            { name: "補助私用領域A (Supplementary Private Use Area-A)", start: 0xF0000, end: 0xFFFFF },
            { name: "補助私用領域B (Supplementary Private Use Area-B)", start: 0x100000, end: 0x10FFFF },
        ];

        const outputTextbox = document.getElementById('output-textbox');
        const blockSelect = document.getElementById('block-select');
        const keyboardDiv = document.getElementById('keyboard');
        const searchInputBottom = document.getElementById('search-input-bottom');
        const searchButtonBottom = document.getElementById('search-button-bottom');
        const searchMessageBottom = document.getElementById('search-message-bottom');
        const charCountSpan = document.getElementById('char-count');
        const codepointRangeSpan = document.getElementById('codepoint-range');

        let highlightedKeyElement = null; 
        let currentSearchedCodePoint = null; 

        function populateBlockSelect() {
            unicodeBlocks.forEach((block, index) => {
                const option = document.createElement('option');
                option.value = index;
                // For display, ensure start and end are padded if necessary
                const startHex = block.start.toString(16).toUpperCase().padStart(4, '0');
                const endHex = block.end.toString(16).toUpperCase().padStart(4, '0');
                option.textContent = `${block.name}`;
                blockSelect.appendChild(option);
            });
        }

        function generateKeyboard(startCodePoint, endCodePoint) {
            keyboardDiv.innerHTML = ''; 
            let charCount = 0;

            if (highlightedKeyElement) {
                try { highlightedKeyElement.classList.remove('highlighted'); } catch(e) {}
                highlightedKeyElement = null;
            }

            const fragment = document.createDocumentFragment();

            for (let i = startCodePoint; i <= endCodePoint; i++) {
                try {
                    const char = String.fromCodePoint(i);
                     // Skip control characters for Basic Latin (U+0000-U+001F and U+007F) from keyboard display
                    if (i < 0x0020 || (i >= 0x007F && i <= 0x009F) ) { 
                        if (i === 0x007F && startCodePoint === 0x0000 && endCodePoint === 0x007F) { // DEL
                            // Allow DEL if it's part of Basic Latin explicitly. Or decide to always skip.
                        } else {
                            continue; 
                        }
                    }


                    const key = document.createElement('div');
                    key.classList.add('key');
                    key.textContent = char;
                    key.title = `U+${i.toString(16).toUpperCase().padStart(4, '0')}`;
                    key.addEventListener('click', () => {
                        const cursorPos = outputTextbox.selectionStart;
                        const textBefore = outputTextbox.value.substring(0, cursorPos);
                        const textAfter = outputTextbox.value.substring(outputTextbox.selectionEnd, outputTextbox.value.length);
                        outputTextbox.value = textBefore + char + textAfter;
                        outputTextbox.selectionStart = outputTextbox.selectionEnd = cursorPos + char.length; 
                    });

                    if (currentSearchedCodePoint === i) { 
                        key.classList.add('highlighted');
                        highlightedKeyElement = key; 
                    }
                    fragment.appendChild(key);
                    charCount++;
                } catch (e) {
                     // console.warn(`Invalid or non-printable code point: ${i.toString(16)}`, e);
                }
            }
            keyboardDiv.appendChild(fragment); 
            charCountSpan.textContent = charCount;
            codepointRangeSpan.textContent = `U+${startCodePoint.toString(16).toUpperCase().padStart(4, '0')} - U+${endCodePoint.toString(16).toUpperCase().padStart(4, '0')}`;

            if (highlightedKeyElement) { 
                highlightedKeyElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            if (charCount > 5000 && !(startCodePoint >= 0xE000 && startCodePoint <= 0xF8FF) /* PUA */ &&
                !(startCodePoint >= 0xF0000 && startCodePoint <= 0x10FFFF) /* Supp PUA */ ) { 
                console.warn(`Warning: Rendering a large block with ${charCount} characters. This might be slow.`);
                searchMessageBottom.textContent = `警告: ${charCount}文字の巨大ブロックをレンダリング中...`;
                setTimeout(() => { if (searchMessageBottom.textContent.startsWith("警告:")) searchMessageBottom.textContent = ""; }, 3000);
            }
        }

        blockSelect.addEventListener('change', () => {
            const selectedBlock = unicodeBlocks[blockSelect.value];
            if (selectedBlock) {
                currentSearchedCodePoint = null; 
                searchMessageBottom.textContent = ''; 
                generateKeyboard(selectedBlock.start, selectedBlock.end);
            }
        });
        
        function performSearch() {
            const query = searchInputBottom.value.trim();
            if (!query) {
                return;
            }

            let targetCodePoint = -1;

            if (query.startsWith('U+') || query.startsWith('u+')) {
                try {
                    targetCodePoint = parseInt(query.substring(2), 16);
                } catch (e) {
                    return;
                }
            } else if (query.length > 0) {
                targetCodePoint = query.codePointAt(0);
            }

            if (isNaN(targetCodePoint) || targetCodePoint < 0 || targetCodePoint > 0x10FFFF) {
                currentSearchedCodePoint = null;
                if (highlightedKeyElement) {
                    highlightedKeyElement.classList.remove('highlighted');
                    highlightedKeyElement = null;
                }
                return;
            }

            currentSearchedCodePoint = targetCodePoint; 

            let foundBlock = null;
            let blockIndex = -1;
            for (let i = 0; i < unicodeBlocks.length; i++) {
                if (targetCodePoint >= unicodeBlocks[i].start && targetCodePoint <= unicodeBlocks[i].end) {
                    // Consider blocks that are not just surrogates
                    const isSurrogateBlock = (unicodeBlocks[i].start >= 0xD800 && unicodeBlocks[i].end <= 0xDFFF);
                    if (!isSurrogateBlock) {
                        foundBlock = unicodeBlocks[i];
                        blockIndex = i;
                        break;
                    }
                }
            }

            if (foundBlock) {
                blockSelect.value = blockIndex; 
                generateKeyboard(foundBlock.start, foundBlock.end); 
                const charDisplay = (targetCodePoint >= 0x0000 && targetCodePoint <= 0x001F) || (targetCodePoint === 0x007F) ? "(制御文字)" : String.fromCodePoint(targetCodePoint);
            } else {
                const charDisplay = (targetCodePoint >= 0x0000 && targetCodePoint <= 0x001F) || (targetCodePoint === 0x007F) ? "(制御文字)" : String.fromCodePoint(targetCodePoint);
                searchMessageBottom.textContent = `文字 '${charDisplay}' (U+${targetCodePoint.toString(16).toUpperCase().padStart(4,'0')}) を含む定義済みブロックが見つかりません。`;
                currentSearchedCodePoint = null; 
                if (highlightedKeyElement) {
                    highlightedKeyElement.classList.remove('highlighted');
                    highlightedKeyElement = null;
                }
            }
        }

        searchButtonBottom.addEventListener('click', performSearch);
        searchInputBottom.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                performSearch();
            }
        });

        // 初期化
        populateBlockSelect();
        if (unicodeBlocks.length > 0) {
            const defaultBlockIndex = unicodeBlocks.findIndex(b => b.name.includes("基本ラテン文字"));
            blockSelect.value = defaultBlockIndex !== -1 ? defaultBlockIndex : 0;
            const initialBlock = unicodeBlocks[blockSelect.value];
            currentSearchedCodePoint = null; 
            generateKeyboard(initialBlock.start, initialBlock.end);
        }
    </script>
</body>
</html>